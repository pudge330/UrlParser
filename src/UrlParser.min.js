var UrlParser=function(){var r={regexes:{scheme:/^([a-zA-Z0-9]+):\/\/|^\/\//,username_password:/^([a-zA-Z0-9_-]+)?:([a-zA-Z0-9_-]+)?@/,host:/^((?:(?:[a-zA-Z0-9_-]+)\.)+(?:[a-zA-Z0-9_-]+){1})/,port:/^(?::([0-9]+))/,path:/^((?!\/\/)(?:\/|\.\/|\.\.\/)(?:[^?#]+)?)/,query:/^(?:\?([^#]+)*)/,fragment:/^(?:#(.+)*)/},parse:function(e,t){t=void 0!==t?t:"";var a=e,o=r.urlParts(),s={};o.url=e;for(var n in r.regexes)if(r.regexes.hasOwnProperty(n)){var h=a.match(r.regexes[n]);if(s[n]=!1,h){s[n]=!0;var u=n.split("_");a=a.substring(h[0].length,a.length);for(var i=0;i<u.length;i++)void 0!==h[i+1]&&(o[u[i]]=h[i+1])}}var p=!1;for(var n in o)o.hasOwnProperty(n)&&""!=o[n]&&(p=!0);if(""==o.host&&s.scheme?p=!1:""==o.host?""==o.path?p=!1:(""!=o.scheme||""!=o.username||""!=o.password||o.host||o.port)&&(p=!1):""==o.path&&(o.path=t),p){if(""!=o.host){var m=o.host.split(".");m.length>2?(o.domain=m[m.length-2]+"."+m[m.length-1],m.pop(),m.pop(),o.subdomain=m.join(".")):o.domain=o.host}var d=o.path.replace(/^\/+|\/+$/g,"");if(""!=d?o.pathParts=d.split("/"):""!=o.path&&(o.pathParts=["/"]),o.queryString=o.path+(""!=o.query?"?"+o.query:""),""!=o.query)for(var c=o.query.split("&"),i=0;i<c.length;i++){var l=c[i].split("=");l.length<2&&l.push(""),o.queryVariables[l[0]]=decodeURIComponent(l[1])}return o}return null},build:function(e){var t=r.cloneObject(e);return void 0===t.scheme&&(t.scheme=""),void 0===t.username&&(t.username=""),void 0===t.password&&(t.password=""),void 0===t.subdomain&&(t.subdomain=""),void 0===t.domain&&(t.domain=""),void 0===t.host&&(t.host=""),void 0===t.port&&(t.port=""),void 0===t.path&&(t.path=""),void 0===t.query&&(t.query=""),void 0===t.fragment&&(t.fragment=""),""!=t.scheme&&(t.scheme=t.scheme+"://"),""==t.domain&&""==t.host||""!=t.scheme||(t.scheme="//"),""==t.host&&(""!=t.subdomain&&""!=t.domain?t.host=t.subdomain+"."+t.domain:""!=t.domain&&(t.host=t.domain)),t.auth="",(""!=t.username||""!=t.password)&&(t.auth=t.username+":"+t.password+"@"),""!=t.port&&(t.port=":"+t.pprt),""!=t.query&&(t.query="?"+t.query),""!=t.fragment&&(t.fragment="#"+t.fragment),t.path.match(/^\./)&&""!=t.host&&(t.path="/"+t.path),t.host?t.scheme+t.auth+t.host+t.port+t.path+t.query+t.fragment:(""==t.path&&(t.path="/"),t.path+t.query+t.fragment)},urlParts:function(){return{url:"",scheme:"",username:"",password:"",subdomain:"",domain:"",host:"",port:"",path:"",query:"",fragment:"",queryString:"",pathParts:[],queryVariables:{}}},cloneObject:function(r){if(null==r||"object"!=typeof r)return r;var e=r.constructor();for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e}};return r}();